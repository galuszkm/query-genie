# Environment Configuration
# Options: development, staging, production
# Production: CORS is completely disabled (no cross-origin requests allowed)
# Development: CORS enabled - uses ALLOWED_ORIGINS if set, otherwise localhost defaults
ENVIRONMENT=development

# CORS Configuration (Development only - ignored in production)
# Comma-separated list of allowed origins
# Leave empty or unset to use localhost defaults (ports 3000, 5173)
# Example: ALLOWED_ORIGINS=https://myapp.com,http://localhost:8080
ALLOWED_ORIGINS=

# PostgreSQL Configuration - Multiple Databases
# Configure multiple databases using DATABASE*_URL pattern
# The database name is extracted from the connection string path
# NOTE: For Docker containers, use host.docker.internal or 172.28.32.1 (WSL IP)
#       For Windows development, use localhost
DATABASE1_URL=postgresql://***:***@localhost:5432/ops_apps
DATABASE2_URL=postgresql://***:***@localhost:5432/products_db
DATABASE3_URL=postgresql://***:***@localhost:5432/analytics_db
POSTGRES_USER=***
POSTGRES_PASSWORD=***
POSTGRES_DB=products_db

# MCP Server Configuration
# For Windows dev: use localhost
# For Docker: service name is mcp-server
MCP_SERVER_HOST=0.0.0.0
MCP_SERVER_PORT=8000
MCP_SERVER_URL=http://localhost:8000/mcp

# Database Connection Pool Settings
# Control the size and behavior of connection pools for each database
# MAX: Maximum number of connections in the pool (default: 20)
# MIN: Minimum number of connections to maintain (default: 5)
# IDLE_TIMEOUT: Seconds before closing idle connections (default: 300 = 5 minutes)
DB_POOL_SIZE=20
DB_POOL_MIN_SIZE=5
DB_POOL_IDLE_TIMEOUT=300

# API Key for authentication (optional but recommended for production)
# Generate a strong random key: python -c "import secrets; print(secrets.token_urlsafe(32))"
API_KEY=change-me-to-a-strong-random-key

# Input Sanitization (Security)
# Strict mode rejects messages with suspicious patterns (recommended for production)
# Non-strict mode logs warnings but allows all messages (use for development if needed)
# Default: true (strict mode enabled for security)
INPUT_SANITIZER_STRICT=true

# Model Provider Configuration (BEDROCK, OLLAMA, or OPENAI)
MODEL_PROVIDER=BEDROCK

# AWS Bedrock Configuration
# Required when MODEL_PROVIDER=BEDROCK
BEDROCK_MODEL=***
AWS_REGION=***
AWS_ACCESS_KEY_ID=***
AWS_SECRET_ACCESS_KEY=***
AWS_SESSION_TOKEN=***

# Ollama Configuration
# Required when MODEL_PROVIDER=OLLAMA
# For Windows dev: use localhost
# For Docker: use host.docker.internal or 172.28.32.1 if Ollama runs on Windows host
OLLAMA_HOST=http://localhost:11434
OLLAMA_MODEL=gpt-oss:20b

# OpenAI Configuration
# Required when MODEL_PROVIDER=OPENAI
OPENAI_API_KEY=***
OPENAI_MODEL=gpt-5-mini

# Redis Configuration
# For Windows dev: use localhost
# For Docker: use service name 'redis' or host.docker.internal
REDIS_URL=redis://localhost:6379/0
REDIS_TASK_QUEUE=agent:tasks
REDIS_TASK_TIMEOUT=300

# Session Configuration (Agent Service)
# SESSIONS_DIR: Directory where session files are stored (created automatically)
# TTL: How long sessions are kept before cleanup (in hours) - applies to both files and agent cache
# MAX_SESSIONS: Maximum number of sessions to store (oldest are deleted)
# CLEANUP_INTERVAL: How often cleanup runs (in minutes)
SESSIONS_DIR=strands_sessions
SESSION_TTL_HOURS=2
SESSION_MAX_SESSIONS=200
SESSION_CLEANUP_INTERVAL_MINUTES=30
